# =============================================================================
# SolTip Backend Environment Variables
# Copy this file to .env and fill in the values.
# NEVER commit .env to source control.
# =============================================================================

# ---------------------------------------------------------------------------
# Database (REQUIRED)
# ---------------------------------------------------------------------------
# PostgreSQL connection string
# Format: postgres://USER:PASSWORD@HOST:PORT/DBNAME
# Local:   postgres://soltip:soltip@localhost:5432/soltip
# Managed: postgres://soltip:xxx@your-db.region.rds.amazonaws.com:5432/soltip
DATABASE_URL=postgres://soltip:soltip@localhost:5432/soltip

# Maximum number of database connections in the pool
# Increase for production (default: 10)
DB_MAX_CONNECTIONS=10

# ---------------------------------------------------------------------------
# Solana / On-Chain
# ---------------------------------------------------------------------------
# Solana RPC endpoint
# Devnet:  https://api.devnet.solana.com
# Mainnet: Use a paid RPC provider (Helius, QuickNode, Triton, etc.)
#   Helius:    https://mainnet.helius-rpc.com/?api-key=YOUR_KEY
#   QuickNode: https://your-endpoint.solana-mainnet.quiknode.pro/YOUR_KEY
#   Triton:    https://soltip-mainnet.rpcpool.com/YOUR_KEY
SOLANA_RPC_URL=https://api.devnet.solana.com

# Deployed Anchor program ID (from `anchor deploy`)
# Run `anchor keys list` to see your program's keypair address
PROGRAM_ID=BhynwWdN5g5S5FfCEgDovajaYQDq925S2Xs8vXas58uo

# Platform authority wallet address (the admin wallet that can pause/verify)
# This is the public key of the wallet used to run `initialize_platform`
PLATFORM_AUTHORITY=

# ---------------------------------------------------------------------------
# Server
# ---------------------------------------------------------------------------
# Bind address (use 0.0.0.0 in production/Docker)
HOST=127.0.0.1

# Server port
PORT=8080

# ---------------------------------------------------------------------------
# CORS (Cross-Origin Resource Sharing)
# ---------------------------------------------------------------------------
# Comma-separated list of allowed origins
# Use * for development, specific origins for production
# Example: https://soltip.xyz,https://www.soltip.xyz
CORS_ORIGINS=*

# ---------------------------------------------------------------------------
# Authentication
# ---------------------------------------------------------------------------
# Auth token validity window in seconds (default: 300 = 5 minutes)
# Wallet signatures older than this are rejected (anti-replay)
AUTH_TOKEN_MAX_AGE_SECS=300

# ---------------------------------------------------------------------------
# Webhooks
# ---------------------------------------------------------------------------
# Timeout for webhook HTTP requests in seconds
WEBHOOK_TIMEOUT_SECS=10

# Maximum webhook retries on failure
WEBHOOK_MAX_RETRIES=3

# ---------------------------------------------------------------------------
# Price Feed
# ---------------------------------------------------------------------------
# CoinGecko API key (optional, for higher rate limits)
# Free tier: 10-30 req/min. Pro: https://www.coingecko.com/en/api/pricing
# Leave empty to use the free public endpoint
COINGECKO_API_KEY=

# Price cache TTL in seconds (default: 60)
PRICE_CACHE_TTL_SECS=60

# ---------------------------------------------------------------------------
# Logging
# ---------------------------------------------------------------------------
# Log level: error, warn, info, debug, trace
# Example: info,soltip_backend=debug,sqlx=warn
RUST_LOG=info,soltip_backend=debug
